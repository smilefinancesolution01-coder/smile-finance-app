<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smile AI - Superfast</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #0b0b0b; color: #fff; font-family: 'Segoe UI', sans-serif; height: 100vh; overflow: hidden; }
        .sidebar { width: 260px; background: #161616; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .sidebar.closed { margin-left: -260px; }
        .main-chat { flex: 1; background: #0b0b0b; display: flex; flex-direction: column; }
        /* Smooth Scrolling */
        .chat-window { flex: 1; overflow-y: auto; scroll-behavior: smooth; }
        /* Fast Reply Animation */
        .typing { font-size: 14px; color: #aaa; margin-bottom: 10px; display: none; }
        .input-box { background: #202123; border: 1px solid #444; border-radius: 24px; transition: 0.2s; }
        .input-box:focus-within { border-color: #4285f4; box-shadow: 0 0 10px rgba(66, 133, 244, 0.2); }
        .btn-login { background: #4285f4; padding: 8px 20px; border-radius: 20px; font-weight: bold; }
    </style>
</head>
<body class="flex">

    <div class="sidebar border-r border-gray-800 flex flex-col" id="side">
        <div class="p-6 text-2xl font-bold text-blue-500 italic">Smile AI</div>
        <div class="flex-1 px-4 space-y-2 overflow-y-auto" id="categories">
            <p class="text-[10px] text-gray-500 uppercase font-bold mt-4">Shopping Mall</p>
            <div onclick="shop('Clothes')" class="p-2 hover:bg-gray-800 rounded cursor-pointer text-sm"><i class="fa-solid fa-shirt mr-2"></i>Fashion</div>
            <div onclick="shop('Medicines')" class="p-2 hover:bg-gray-800 rounded cursor-pointer text-sm"><i class="fa-solid fa-pills mr-2"></i>Health</div>
            <div onclick="shop('Electronics')" class="p-2 hover:bg-gray-800 rounded cursor-pointer text-sm"><i class="fa-solid fa-laptop mr-2"></i>Gadgets</div>
        </div>
        <div class="p-4 border-t border-gray-800" id="authSection">
            <button id="loginBtn" onclick="handleLogin()" class="btn-login w-full text-sm">Login with Google</button>
        </div>
    </div>

    <div class="main-chat">
        <header class="p-4 flex items-center justify-between bg-[#0b0b0b]">
            <i class="fa-solid fa-bars cursor-pointer" onclick="toggleSide()"></i>
            <div id="userProfile" class="hidden flex items-center gap-2">
                <span id="userName" class="text-xs">Aarif</span>
                <img id="userPic" class="w-8 h-8 rounded-full border border-gray-600">
                <button onclick="handleLogout()" class="text-[10px] text-red-500 underline">Logout</button>
            </div>
        </header>

        <div class="chat-window p-6" id="chat">
            <div id="welcome" class="text-center mt-20">
                <h2 class="text-3xl font-bold mb-4">Kaise ho, Bhai?</h2>
                <p class="text-gray-400">Main superfast mode mein hoon. Pucho kya dhoondna hai?</p>
            </div>
            <div id="msgs" class="max-w-3xl mx-auto space-y-6"></div>
            <div id="typing" class="typing max-w-3xl mx-auto mt-4">Smile AI soch raha hai...</div>
        </div>

        <div class="p-4 bg-[#0b0b0b]">
            <div class="input-box max-w-3xl mx-auto flex items-center px-4 py-2">
                <input id="q" type="text" placeholder="Sab kuch milega yahan..." class="flex-1 bg-transparent border-none outline-none text-sm">
                <i onclick="startMic()" class="fa-solid fa-microphone text-blue-400 cursor-pointer mx-2"></i>
                <i onclick="send()" class="fa-solid fa-paper-plane text-blue-500 cursor-pointer"></i>
            </div>
        </div>
    </div>

    <script>
        const ID = "smileai24-21";

        function toggleSide() { document.getElementById('side').classList.toggle('closed'); }
        
        function shop(t) { window.open(`https://www.amazon.in/s?k=${t}&tag=${ID}`, '_blank'); }

        async function send() {
            const q = document.getElementById('q').value;
            if(!q) return;

            document.getElementById('welcome').style.display = 'none';
            const msgs = document.getElementById('msgs');
            msgs.innerHTML += `<div class="flex justify-end"><span class="bg-blue-600 px-4 py-2 rounded-2xl text-sm">${q}</span></div>`;
            document.getElementById('q').value = "";
            document.getElementById('typing').style.display = 'block';

            try {
                // Backend ko fast banane ke liye we use a fast timeout
                const res = await fetch('https://smile-financial-service-ai.onrender.com/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({message: q})
                });
                const d = await res.json();
                document.getElementById('typing').style.display = 'none';
                msgs.innerHTML += `<div class="flex gap-3"><div class="w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-xs">S</div><div class="bg-[#202123] px-4 py-2 rounded-2xl text-sm leading-relaxed">${d.reply}</div></div>`;
                document.getElementById('chat').scrollTop = document.getElementById('chat').scrollHeight;
            } catch(e) {
                document.getElementById('typing').innerText = "Network slow hai, Bhai!";
            }
        }

        // --- Firebase Integration Logic (Placeholder) ---
        function handleLogin() {
            // Yahan hum Firebase SDK add karenge agle step mein
            alert("Firebase Console se connect karte hi ye chalu ho jayega!");
        }

        function handleLogout() {
            location.reload();
        }
    </script>
</body>
</html>
